/*C-SCAN DISK SCHEDULING ALGORITHM*/

#include<stdio.h>
#include<math.h>
#include<stdlib.h>

int main()
{
  int a[20],n,head,i,j,k,seek=0,max,diff,temp,b[20],c[20],
  temp1=0,temp2=0;
  float avg;
  printf("Enter the max range of disk:\n");
  scanf("%d",&max);
  printf("Enter the initial head position:\n");
  scanf("%d",&head);
  printf("Enter the size of queue request:\n");
  scanf("%d",&n);
  printf("Enter the queue of disk positions to be read:\n");
  for(i=1;i<=n;i++)
  {
    scanf("%d",&temp);
    if(temp>=head)
    {
      b[temp1]=temp;
      temp1++;
    }
    else
    {
      c[temp2]=temp;
      temp2++;
    }
  }
  for(i=0;i<temp1-1;i++)
  {
    for(j=i+1;j<temp1;j++)
    {
      if(b[i]>b[j])
      {
        temp=b[i];
        b[i]=b[j];
        b[j]=temp;
      }
    } 
  } 
  for(i=0;i<temp2-1;i++)
  {
    for(j=i+1;j<temp2;j++)
    {
      if(c[i]>c[j]) 
      {
        temp=c[i];
        c[i]=c[j];
        c[j]=temp;
      }
    }
  }
  for(i=1,j=0;j<temp1;i++,j++)
  a[i]=b[j];
  a[i]=max;
  a[i+1]=0;
  for(i=temp1+3,j=0;j<temp2;i++,j++)
  a[i]=c[j];
  a[0]=head;
  for(j=0;j<=n+1;j++)
  {
    diff=abs(a[j+1]-a[j]);
    seek+=diff;
    printf("Disk head moves from :%d to :%d with seek %d\n",a[j],a[j+1],diff);
  }
  printf("Total seek time is: %d\n",seek);
  avg=seek/(float)n;
  printf("Average seek time is :%f\n",avg);
  return 0;
}
